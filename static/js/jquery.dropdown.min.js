!function(a,b,c){"use strict";a.DropDown=function(b,c){this.$el=a(c),this._init(b)},a.DropDown.defaults={speed:300,easing:"ease",gutter:0,stack:!0,delay:0,random:!1,rotated:!1,slidingIn:!1,setzindex:1e3,onOptionSelect:function(a){return!1}},a.DropDown.prototype={_init:function(b){this.options=a.extend(!0,{},a.DropDown.defaults,b),this._layout(),this._initEvents()},_layout:function(){var b=this;this.minZIndex=b.options.setzindex;var d=this._transformSelect();this.opts=this.listopts.children("li"),this.optsCount=this.opts.length,this.size={width:this.dd.width(),height:this.dd.height()};var e=this.$el.attr("name"),f=this.$el.attr("id"),g=e!==c?e:f!==c?f:"cd-dropdown-"+(new Date).getTime();this.inputEl=0==d?a('<input type="hidden" name="'+g+'" value=""></input>').insertAfter(this.selectlabel):a('<input type="hidden" name="'+g+'" value="'+d+'"></input>').insertAfter(this.selectlabel),this.selectlabel.css("z-index",this.minZIndex+this.optsCount),this._positionOpts(),Modernizr.csstransitions&&setTimeout(function(){b.opts.css("transition","all "+b.options.speed+"ms "+b.options.easing)},25)},_transformSelect:function(){var b="",d="",e=-1;return this.$el.children("option").each(function(){var f=a(this),g=isNaN(f.attr("value"))?f.attr("value"):Number(f.attr("value")),h=f.attr("class"),i=f.attr("selected"),j=f.text();-1!==g&&(b+=h!==c?'<li data-value="'+g+'"><span class="'+h+'">'+j+"</span></li>":'<li data-value="'+g+'"><span>'+j+"</span></li>"),i&&(d=j,e=g)}),this.listopts=a("<ul/>").append(b),this.selectlabel=a("<span/>").append(d),this.dd=a('<div class="cd-dropdown"/>').append(this.selectlabel,this.listopts).insertAfter(this.$el),this.$el.remove(),e},_positionOpts:function(b){var c=this;this.listopts.css("height","auto"),this.opts.each(function(b){a(this).css({zIndex:c.minZIndex+c.optsCount-1-b,top:c.options.slidingIn?(b+1)*(c.size.height+c.options.gutter):0,left:0,marginLeft:c.options.slidingIn?b%2==0?c.options.slidingIn:-c.options.slidingIn:0,opacity:c.options.slidingIn?0:1,transform:"none"})}),this.options.slidingIn||this.opts.eq(this.optsCount-1).css({top:(this.options.stack,0),left:(this.options.stack,0),width:this.options.stack?this.size.width-0:this.size.width,transform:"none"}).end().eq(this.optsCount-2).css({top:(this.options.stack,0),left:(this.options.stack,0),width:this.options.stack?this.size.width-0:this.size.width,transform:"none"}).end().eq(this.optsCount-3).css({top:(this.options.stack,0),left:0,transform:"none"})},_initEvents:function(){var b=this;this.selectlabel.on("mousedown.dropdown",function(a){return b.opened?b.close():b.open(),!1}),this.opts.on("click.dropdown",function(){if(b.opened){var c=a(this);b.options.onOptionSelect(c),b.inputEl.val(c.data("value")),b.selectlabel.html(c.html()),b.close()}})},open:function(){var b=this;this.dd.toggleClass("cd-active"),this.listopts.css("height",(this.optsCount+1)*(this.size.height+this.options.gutter)),this.opts.each(function(c){a(this).css({opacity:1,top:b.options.rotated?b.size.height+b.options.gutter:(c+1)*(b.size.height+b.options.gutter),left:b.options.random?Math.floor(11*Math.random()-5):0,width:b.size.width,marginLeft:0,transform:b.options.random?"rotate("+Math.floor(11*Math.random()-5)+"deg)":b.options.rotated?"right"===b.options.rotated?"rotate(-"+5*c+"deg)":"rotate("+5*c+"deg)":"none",transitionDelay:b.options.delay&&Modernizr.csstransitions?b.options.slidingIn?c*b.options.delay+"ms":(b.optsCount-1-c)*b.options.delay+"ms":0})}),this.opened=!0},close:function(){var b=this;this.dd.toggleClass("cd-active"),this.options.delay&&Modernizr.csstransitions&&this.opts.each(function(c){a(this).css({"transition-delay":b.options.slidingIn?(b.optsCount-1-c)*b.options.delay+"ms":c*b.options.delay+"ms"})}),this._positionOpts(!0),this.opened=!1}},a.fn.dropdown=function(b){var c=a.data(this,"dropdown");if("string"==typeof b){var d=Array.prototype.slice.call(arguments,1);this.each(function(){c[b].apply(c,d)})}else this.each(function(){c?c._init():c=a.data(this,"dropdown",new a.DropDown(b,this))});return c}}(jQuery,window);